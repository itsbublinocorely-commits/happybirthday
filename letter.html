<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Special Surprise For You ‚ú®</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Comic Sans MS", cursive, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #f8e1f4, #e0c3f7, #c2e6ff);
      background-size: 400% 400%;
      animation: gradientBackground 15s ease infinite;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 10;
      opacity: 0;
      transform: translateY(20px);
      pointer-events: none;
      transition: opacity 0.8s ease, transform 0.8s ease;
    }

    body.ready .container {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    header {
      text-align: center;
      margin-bottom: 28px;
    }

    h1 {
      font-size: 2.4rem;
      color: #ff1493;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    .letter-container {
      background: rgba(255, 255, 255, 0.72);
      border-radius: 20px;
      padding: 28px;
      box-shadow: 0 0 20px rgba(106, 76, 147, 0.25);
      position: relative;
      overflow: hidden;
      margin-bottom: 24px;
    }

    .letter-container::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 20px;
      box-shadow: inset 0 0 15px rgba(255, 215, 232, 0.7);
      pointer-events: none;
      z-index: 1;
    }

    .letter {
      font-size: 1.08rem;
      line-height: 1.7;
      color: #333;
      position: relative;
      z-index: 2;
      min-height: 220px;
      white-space: pre-line;
    }

    .surprise-button-container {
      text-align: center;
      margin: 20px 0 8px;
    }

    .surprise-button {
      background: linear-gradient(45deg, #ff9a9e, #fad0c4, #fad0c4, #a18cd1);
      background-size: 300% 300%;
      animation: gradientButton 5s ease infinite;
      color: white;
      font-size: 1.35rem;
      font-weight: bold;
      padding: 14px 34px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 5px 20px rgba(161, 140, 209, 0.45);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      position: relative;
      z-index: 2;
    }

    .surprise-button:hover {
      transform: translateY(-3px) scale(1.04);
      box-shadow: 0 8px 25px rgba(161, 140, 209, 0.65);
    }

    .surprise-button:active {
      transform: translateY(1px);
    }

    .back-wrap {
      text-align: center;
    }

    .back-button {
      display: inline-block;
      margin-top: 18px;
      padding: 10px 18px;
      background: rgba(255, 255, 255, 0.7);
      border: 2px solid #6a4c93;
      color: #6a4c93;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .back-button:hover {
      background: #6a4c93;
      color: white;
    }

    .music-toggle {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 999;
      width: 52px;
      height: 52px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.3rem;
      background: rgba(255, 255, 255, 0.85);
      box-shadow: 0 6px 18px rgba(106, 76, 147, 0.25);
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.4s ease;
      opacity: 0;
      pointer-events: none;
    }

    body.ready .music-toggle {
      opacity: 1;
      pointer-events: auto;
    }

    .music-toggle:hover {
      transform: scale(1.06);
      box-shadow: 0 8px 22px rgba(106, 76, 147, 0.35);
    }

    /* Envelope intro */
    .envelope-intro {
      position: fixed;
      inset: 0;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at center, rgba(255,255,255,0.35), rgba(255,20,147,0.12));
      transition: opacity 0.7s ease, visibility 0.7s ease;
    }

    .envelope-intro.hide {
      opacity: 0;
      visibility: hidden;
    }

    .envelope-wrap {
      text-align: center;
    }

    .envelope {
      position: relative;
      width: 220px;
      height: 155px;
      margin: 0 auto;
      cursor: pointer;
      outline: none;
      animation: envelopeFloat 2s ease-in-out infinite;
      filter: drop-shadow(0 12px 22px rgba(0, 0, 0, 0.18));
    }

    @keyframes envelopeFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }

    .envelope-back {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #ff8eb8, #ff6ea7);
      border-radius: 12px;
      border: 3px solid rgba(255,255,255,0.8);
      overflow: hidden;
    }

    .envelope-letter {
      position: absolute;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      width: 160px;
      height: 105px;
      background: rgba(255,255,255,0.95);
      border-radius: 8px;
      z-index: 1;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      transition: transform 0.55s ease, bottom 0.55s ease;
    }

    .envelope-letter::before {
      content: "";
      position: absolute;
      top: 14px;
      left: 14px;
      right: 14px;
      height: 2px;
      background: #ffd6e6;
      box-shadow:
        0 12px 0 #ffd6e6,
        0 24px 0 #ffd6e6,
        0 36px 0 #ffd6e6;
    }

    .envelope-front {
      position: absolute;
      inset: 0;
      z-index: 3;
      pointer-events: none;
    }

    .front-left {
      position: absolute;
      left: 0;
      bottom: 0;
      width: 50%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.05));
      clip-path: polygon(0 100%, 100% 100%, 100% 45%);
      border-bottom-left-radius: 12px;
    }

    .front-right {
      position: absolute;
      right: 0;
      bottom: 0;
      width: 50%;
      height: 100%;
      background: linear-gradient(225deg, rgba(255,255,255,0.25), rgba(255,255,255,0.05));
      clip-path: polygon(0 45%, 0 100%, 100% 100%);
      border-bottom-right-radius: 12px;
    }

    .front-bottom {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 58%;
      background: linear-gradient(180deg, #ff79ae, #ff5f9f);
      clip-path: polygon(0 100%, 50% 45%, 100% 100%);
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
    }

    .envelope-flap {
      position: absolute;
      left: -3px;
      right: -3px;
      top: -3px;
      height: 90px;
      background: linear-gradient(135deg, #b47bff, #8a2be2);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: top center;
      transition: transform 0.55s ease;
      z-index: 4;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    .seal {
      position: absolute;
      left: 50%;
      top: 48px;
      transform: translateX(-50%);
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #ffd700;
      color: #8a2be2;
      font-size: 14px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
      box-shadow: 0 2px 8px rgba(0,0,0,0.18);
      transition: opacity 0.25s ease;
    }

    .envelope-hint {
      margin-top: 14px;
      color: white;
      font-size: 1rem;
      text-shadow: 0 2px 6px rgba(0,0,0,0.35);
      animation: pulseHint 1.1s infinite;
    }

    @keyframes pulseHint {
      0%, 100% { opacity: 0.8; transform: translateY(0); }
      50% { opacity: 1; transform: translateY(-2px); }
    }

    .envelope.opening {
      animation: none;
    }

    .envelope.opening .envelope-flap {
      transform: rotateX(180deg);
    }

    .envelope.opening .seal {
      opacity: 0;
    }

    .envelope.opening .envelope-letter {
      bottom: 48px;
      transform: translateX(-50%) translateY(-14px);
    }

    .floating-element {
      position: absolute;
      pointer-events: none;
      opacity: 0.7;
      z-index: 1;
      animation-name: float;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
      animation-direction: alternate;
    }

    .cursor-effect {
      position: absolute;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: rgba(255, 182, 193, 0.7);
      pointer-events: none;
      z-index: 1000;
      transform: translate(-50%, -50%);
      transition: opacity 0.5s ease;
      opacity: 0;
    }

    @keyframes gradientBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes gradientButton {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-20px) rotate(5deg); }
    }

    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      .letter-container { padding: 20px; }
      .letter { font-size: 1rem; }
      .surprise-button { font-size: 1.15rem; padding: 12px 28px; }

      .envelope {
        width: 200px;
        height: 142px;
      }

      .envelope-letter {
        width: 145px;
        height: 96px;
      }
    }
  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

  <!-- Envelope Intro -->
  <div id="envelopeIntro" class="envelope-intro">
    <div class="envelope-wrap">
      <div id="envelope" class="envelope" role="button" tabindex="0" aria-label="Open letter">
        <div class="envelope-back"></div>
        <div class="envelope-letter"></div>

        <div class="envelope-front">
          <div class="front-left"></div>
          <div class="front-right"></div>
          <div class="front-bottom"></div>
        </div>

        <div class="envelope-flap"></div>
        <div class="seal">‚ù§</div>
      </div>

      <div class="envelope-hint">Tap to open üíå</div>
    </div>
  </div>

  <!-- Main Letter Content -->
  <div class="container">
    <header>
      <h1>To My Patatas/Byyy ‚ù§Ô∏è</h1>
    </header>

    <div class="letter-container">
      <div class="letter" id="typed-text"></div>
    </div>

    <div class="surprise-button-container">
      <button class="surprise-button" id="surprise-button">
        Click for a Surprise! üéÅ
      </button>
    </div>

    <div class="back-wrap">
      <a href="index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back
      </a>
    </div>
  </div>

  <!-- Sounds -->
  <audio id="click-sound" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_bb630cc098.mp3?filename=cute-notification-ringtone-1-173850.mp3" type="audio/mpeg">
  </audio>

  <audio id="bg-music" loop>
    <source src="Until i found you.mp3" type="audio/mpeg">
  </audio>

  <!-- Music Toggle -->
  <button id="music-toggle" class="music-toggle" aria-label="Toggle music">üîá</button>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/canvas-confetti/1.5.1/confetti.browser.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const envelopeIntro = document.getElementById("envelopeIntro");
      const envelope = document.getElementById("envelope");
      const surpriseButton = document.getElementById("surprise-button");
      const clickSound = document.getElementById("click-sound");

      const bgMusic = document.getElementById("bg-music");
      const musicToggle = document.getElementById("music-toggle");

      let musicPlaying = false;
      let introOpened = false;
      let typingStarted = false;

      bgMusic.volume = 0.45;

      function updateMusicButton() {
        musicToggle.textContent = musicPlaying ? "üîä" : "üîá";
      }

      function playMusic() {
        bgMusic.play().then(() => {
          musicPlaying = true;
          updateMusicButton();
        }).catch((err) => {
          console.log("Music blocked:", err);
        });
      }

      function pauseMusic() {
        bgMusic.pause();
        musicPlaying = false;
        updateMusicButton();
      }

      musicToggle.addEventListener("click", function () {
        if (musicPlaying) {
          pauseMusic();
        } else {
          playMusic();
        }
      });

      function startTypedLetter() {
        if (typingStarted) return;
        typingStarted = true;

        const letterContent = `,

I just want you to know how deeply proud I am of you. You don‚Äôt always see it, but your strength, your dedication, and your quiet perseverance inspire me every single day. Even when things feel heavy, you keep moving forward, and that alone says so much about the kind of person you are.

I appreciate you more than words can explain. I‚Äôm grateful for your heart, your effort, and the love you give so freely. No matter what season we‚Äôre in, I promise to stand beside you. I‚Äôll celebrate your wins, comfort you in your struggles, and remind you of your worth whenever you forget.

Let‚Äôs grow together. Let‚Äôs choose patience, understanding, and forgiveness. We may stumble sometimes, but I believe in us. I believe in building a love that is steady, strong, and lasting.

I pray that God continues to guide us, protect what we have, and bless the dreams we‚Äôre working toward. Whatever the future holds, I want to face it with you.

I love you . ‚ù§Ô∏è
Byyyy`;

        if (window.Typed) {
          new Typed("#typed-text", {
            strings: [letterContent],
            typeSpeed: 28,
            showCursor: true,
            cursorChar: "|"
          });
        } else {
          // Fallback if Typed.js fails to load
          document.getElementById("typed-text").textContent = letterContent;
        }
      }

      function openEnvelope() {
        if (introOpened) return;
        introOpened = true;

        envelope.classList.add("opening");
        playMusic();

        setTimeout(() => {
          envelopeIntro.classList.add("hide");
          document.body.classList.add("ready");
          startTypedLetter();
          createFloatingDecor();
        }, 700);
      }

      envelope.addEventListener("click", openEnvelope);
      envelope.addEventListener("keydown", function (e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openEnvelope();
        }
      });

      surpriseButton.addEventListener("click", function () {
        clickSound.currentTime = 0;
        clickSound.play().catch(() => {});

        if (typeof confetti === "function") {
          confetti({
            particleCount: 120,
            spread: 80,
            origin: { y: 0.6 }
          });
        }

        setTimeout(() => {
          window.location.href = "gift-box.html";
        }, 800);
      });

      function createFloatingDecor() {
        const floatingElements = [
          { type: "heart", color: "#ff6b8a", size: "22px" },
          { type: "heart", color: "#f48fb1", size: "30px" },
          { type: "star", color: "#ffd54f", size: "22px" },
          { type: "star", color: "#ffecb3", size: "16px" },
          { emoji: "üß∏", size: "30px" },
          { emoji: "‚ú®", size: "24px" },
          { emoji: "‚ú®", size: "20px" },
          { type: "heart", color: "#ff6b8a", size: "26px" },
          { type: "star", color: "#ffd54f", size: "20px" },
          { emoji: "üß∏", size: "26px" }
        ];

        floatingElements.forEach((el) => createFloatingElement(el));

        let lastCursorEffect = 0;
        document.addEventListener("mousemove", function (e) {
          const now = Date.now();
          if (now - lastCursorEffect > 35) {
            createCursorEffect(e);
            lastCursorEffect = now;
          }
        });
      }

      function createFloatingElement(element) {
        const floatingElement = document.createElement("div");
        floatingElement.classList.add("floating-element");

        if (element.emoji) {
          floatingElement.textContent = element.emoji;
          floatingElement.style.fontSize = element.size;
        } else if (element.type === "heart") {
          floatingElement.innerHTML = '<i class="fas fa-heart"></i>';
          floatingElement.style.color = element.color;
          floatingElement.style.fontSize = element.size;
        } else if (element.type === "star") {
          floatingElement.innerHTML = '<i class="fas fa-star"></i>';
          floatingElement.style.color = element.color;
          floatingElement.style.fontSize = element.size;
        }

        floatingElement.style.left = `${Math.random() * window.innerWidth}px`;
        floatingElement.style.top = `${Math.random() * window.innerHeight}px`;
        floatingElement.style.animationDuration = `${5 + Math.random() * 10}s`;
        floatingElement.style.animationDelay = `${Math.random() * 5}s`;

        document.body.appendChild(floatingElement);
      }

      function createCursorEffect(e) {
        const cursorEffect = document.createElement("div");
        cursorEffect.classList.add("cursor-effect");
        cursorEffect.style.left = `${e.pageX}px`;
        cursorEffect.style.top = `${e.pageY}px`;
        document.body.appendChild(cursorEffect);

        setTimeout(() => {
          cursorEffect.style.opacity = 1;
          cursorEffect.style.transform =
            `translate(-50%, -50%) scale(${Math.random() * 0.5 + 0.5})`;

          setTimeout(() => {
            cursorEffect.style.opacity = 0;
            setTimeout(() => cursorEffect.remove(), 500);
          }, 300);
        }, 10);
      }

      updateMusicButton();
    });
  </script>
</body>
</html>